## 🟦 核心包（文件管理系统框架）

**定位**：离线单机程序的“主控框架”，提供基础 UI、文件浏览和插件加载机制。

- **后端框架**
  - **Spring Boot**（应用入口 & 插件生命周期管理）
  - **Spring MVC**（REST API，对接前端）
  - **MyBatis**（如需数据库交互；但核心包主要靠序列化存储配置/索引即可）
  - **内存数据存储 + 序列化文件**（保存用户配置、索引缓存等，无需重量级数据库）
- **前端 UI**
  - **Web UI（HTML/JS/CSS）**：可以用 Vue/React 打包成静态资源内嵌
  - **动态菜单/插件入口渲染**（核心负责主框架 UI，插件入口动态挂载）
- **插件机制**
  - **自定义 ClassLoader**：负责加载/卸载插件 jar
  - **插件描述文件 (plugin.json)**：核心读取插件的元数据（id、名称、入口页面、API base 等）
  - **Spring Boot 动态注册 API**（扫描插件 Controller/Service）
  - **静态资源动态挂载**（ResourceHandler 把插件的前端页面挂到统一路径下，如 `/plugins/{id}/`）
- **运行环境**
  - 100% 本地运行（JDK 17+）
  - 跨平台，但重点优化 Windows

------

## 🟦 补充包（功能插件，例如：本地知识库 Agent）

**定位**：一个自包含的“功能扩展”，带后端逻辑 + 前端 UI 页面，核心包只负责识别和挂载。

- **后端逻辑**

  - **Spring Boot (轻量模块)**
  - **SpringAI**（接入大语言模型 API，用于问答/文件分析）
  - **SQLite**（内置轻量级数据库，用于存储知识库索引、Embedding、文件内容摘要等，可随插件打包分发）
  - **MyBatis / JPA**（操作 SQLite）

- **前端资源**

  - 独立的前端项目（Vue/React/纯静态 HTML 均可）

  - 编译后生成 `dist/` 文件夹，随插件打包 → 在核心挂载时可直接访问

  - 示例路径：

    ```
    knowledge-agent.jar
    knowledge-agent-ui/
      ├─ index.html
      ├─ js/
      └─ css/
    ```

- **插件描述文件 (plugin.json)**

  ```json
  {
    "id": "knowledge-agent",
    "name": "本地知识库",
    "version": "1.0.0",
    "entryUrl": "/plugins/knowledge-agent/index.html",
    "apiBase": "/api/knowledge"
  }
  ```

------

## 🟦 打包与分发

- **核心包**：
  - 打成一个独立运行的 Spring Boot 可执行 jar
  - 带插件目录 `plugins/`，运行时自动扫描
- **补充包**：
  - 以单独 jar + 前端静态资源目录的形式交付
  - SQLite 数据文件和 jar 可以一起放在补充包目录中，拷贝即用
- **最终效果**：
  - 拷贝核心包到 U 盘 → 运行
  - 往 `plugins/` 丢插件 jar + 前端 → 核心包自动识别并挂载 → UI 自动刷新入口

------

## 🔹 技术栈总览表

| 层级     | 核心包                           | 补充包                                   |
| -------- | -------------------------------- | ---------------------------------------- |
| 框架     | Spring Boot + MVC + MyBatis      | Spring Boot + SpringAI + MyBatis/JPA     |
| 数据存储 | 内存存储 + 序列化                | SQLite（嵌入式）                         |
| 前端     | Web UI（Vue/React，可统一风格）  | 自带前端资源（Vue/React 打包后静态页面） |
| 插件管理 | 自定义 ClassLoader + plugin.json | plugin.json 描述元信息                   |
| 特点     | 文件浏览/索引/插件加载           | 功能扩展（AI、知识库、文件处理等）       |

------

👉 这样设计，你的项目就完全具备 **核心框架 + 热插拔插件 + 独立前后端资源** 的能力，既解耦，又能“一拷即跑”。

要不要我帮你写一个 **核心包和补充包的交互流程时序图**？那样论文里能直观展示“插件是怎么被挂载到页面上的”。