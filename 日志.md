# 日志

日期/当日提交次数_版本号



首位：**项目可发布版本**的情况。

二位：**完成完整功能**的情况。

三位：**维修**，**优化**，**新增**，**弃用**的情况。

四位：**测试**，**验证**，**特性**，**暂缓**的情况。



ps：满足同位多个，有几个就涨几位

​	满足异位均有，各自涨各自有的

# 2025-10-10/001_V0.0.0.1

- 验证“DLC”（热插拔）模式初步可行。
- 确定核心包-补充包-开发工具包（提取核心包的util打包）结构。
- 实现核心包运行时动态加载-卸载补充包静态资源的示例。

# 2025-10-10/002_V0.0.0.2

- 升级插件扫描器，允许定义并筛选指定类型格式的文件进行注册。
  - 插件扫描器现在不限制文件名，只要格式允许，起啥名字都行。

# 2025-10-10/003_V0.0.0.3

- 升级插件扫描器和资源复制器，改为从配置文件定义允许的资源格式白名单。
  - 资源的注册与复制进插件资源映射目录这两个行为均依照白名单执行。

# 2025-10-12/001_V0.0.1.4

- 优化：取消核心包-补充包-开发工具包结构，改用核心包-内置补充包结构。
  - 开发补充包时就在核心包内的插件目录内开发，避免没依赖或找不到类啥的。
  - 开发完成后单独把每个补充包剪切出去，用户按需重新放回来就行。
- 维修：解决了无法在核心包启动前提前加入补充包后无法启动的问题。
- 补充：解决了补充包的Bean不能被核心包容器一并管理的问题。
- 特性：不打算解决卸载补充包时残留的幽灵Bean的问题。
- 暂缓：放弃搞懂前端的JS部分，目前暂定就完全让AI代劳：）。

# 2025-10-15/001_V0.6.14.7

- 完成：热插拔机制。
- 完成：双监听机制。
- 完成：插件资源映射功能。
- 完成：插件源码热编译功能。
- 完成：插件Bean动态加入功能。
- 完成：插件资源注册表管理体系。
- 优化：日志版本号定义与编写规则。
- 优化：程序架构。
  - 插件改为在核心包内开发，完成后移出核心包。
  - 插件接入点分为源码挂载点（根目录下的docking/plugins）与资源挂载点（资源目录下的static/plugins）。

- 优化：所有文件的注释描述。
- 优化：唯一配置文件。
  - 改用相对路径。
  - 两份路径配置，对应IDE环境运行与编译后（target）环境。
- 优化：插件注册表管理器。
  - 删除了复制插件资源与运行资源映射目录相关操作。
  - 修改了插件对象的结构，包含更多插件信息。
- 优化：插件服务器。
  - 删除资源扫描器中将插件资源复制至插件资源映射目录的步骤。
  - 删除资源复制器。
  - 删除资源映射目录删除方法。
- 新增：插件资源配置器。
  - 用于处理插件资源的路径映射。
- 新增：插件控制器。
  - 用于给页面返回最新的插件资源信息对象集合。
- 新增：插件（资源）监听器。
  - 用于监听插件资源放置目录，引发装载与卸载行为。
  - 根据监听事件引发插件服务器的扫描行为。
- 新增：插件（源码）监听器。
  - 用于监听插件源码放置目录，引发装载与卸载行为。
  - 根据监听事件引发热编译行为。
  - 可在运行时注册Bean（会试图把所有的java做成Bean）。
- 新增：插件编译器。
  - 用于在运行时将新加入的插件源码编译掉。
  - 会将每个插件编译后的class文件单独放进这个插件所在的同级目录内。
- 新增：IO，序列化与字符串工具类。
  - 封装了文件IO，序列及反序列化与字符串相关的方法。
- 弃用：插件监听器。
- 测试：项目打包与不定路径运行测试。
  - 以展开目录形式打包（不做jar，要不然热插拔做不了了）。
  - 成功在非IDE环境启动项目。
  - 成功在项目整体随意移动到任何地方时均能启动项目。
- 特性：幽灵豆子问题。
  - 当某个插件卸载时，由这个插件注册的Bean是不会被从容器中删除的（因为似乎留着没啥影响所以得处理）。
- 特性：豆子唯一性争夺问题。
  - 当某个插件二次挂载时，第二次注册的Bean会与首次注册的Bean起冲突（幽灵豆子的遗留问题）。
  - 暂定尝试赋予插件独立的子容器解决。

# 2025-10-16/001_V0.6.23.8

- 维修：幽灵豆子问题。
- 维修：豆子唯一性争夺问题。
- 优化：日志排版。
- 优化：项目目录结构。
- 优化：插件（源码）监听器。
  - 删除了旧的动态豆子注册器相关引用。
  - 使用子容器管理器接替动态注册Bean的功能。
  - 添加监听插件的删除事件，删除时卸载对应的子容器。
- 新增：功能文档。
- 新增：目录结构文档。
- 新增：子容器管理器。
  - 用于管理插件子容器的生命周期（创建和销毁）。
- 弃用：动态豆子注册器。
- 特性：生产环境插件Bean注册失败问题。
  - 在打包后的环境所有文件均为.class，但插件编译器只认.java经过转换后才能注册。
  - 暂定原逻辑保留，加入当没有.java则尝试寻找.class，找到的话跳过编译，直接可以注册豆子。

# 2025-10-17/001_V0.6.28.8

- 维修：生产环境插件Bean注册失败问题。
- 优化：序列化与字符串工具类。
  - 修改了类名，剔除了IO操作的职能。
  - 修改了一些注释。
  - 泛化了原来的方法，使其可以适应更多情况。
- 优化：插件编译器。
  - 重构了这个类，提取并封装了一些方法。
  - 加入了只有.class却没有.java情况的分支处理逻辑。
- 新增：项目应用的开源协议（MIT）。
  - 项目所有源码文件均同时在头添加了版权声明。
- 新增：文件IO工具类。
  - 封装了文件操作与IO操作相关的方法。

# 2025-10-19/001_V0.7.33.10

- 完成：插件资源动态修改功能。
  - 运行时允许修改插件的资源文件，并实时响应修改。
- 维修：无法在运行时修改插件资源文件。
- 优化：项目依赖。
  - 添加了commons-io（专门处理 Java IO的工具库）和commons-codec（编码/解码工具库）的依赖。

- 优化：插件（资源）监听器。
  - 改用commons-io代替Java NIO，支持递归监听和更精准的事件捕获，写法也更简洁易懂。
  - 添加修改事件监听。
  - 将文件版本哈希并入响应，欺骗浏览器进行资源刷新（使用不同的url浏览器就会当成新玩意重新加载，绕过该死的浏览器缓存，这样才能实时响应资源的修改）。
- 优化：插件服务器。
  - 添加获取文件哈希的逻辑，并将其并入响应。

- 优化：index.js
  - 添加识别文件哈希的逻辑。
  - 仅刷新文件哈希出现变化的资源，避免了全量刷新搞得页面一闪一闪的。

- 测试：插件资源是否可以在挂载状态热修改。
  - 无法实时响应修改。

- 特性：无法在运行时修改插件资源文件。
